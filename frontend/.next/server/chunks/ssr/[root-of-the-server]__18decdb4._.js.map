{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Upadhyay/Desktop/task%20manager%20system/frontend/app/dashboard/page.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { API_URL } from \"../config\";\r\nimport { PieChart, Pie, Cell, Tooltip, Legend } from \"recharts\";\r\n\r\nexport default function DashboardPage() {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n\r\n  const fetchTasks = async () => {\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/tasks`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) return setMsg(data.error || \"Failed to fetch tasks\");\r\n      setTasks(data);\r\n    } catch {\r\n      setMsg(\"Cannot reach backend.\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!token) return (window.location.href = \"/login\");\r\n    fetchTasks();\r\n  }, []);\r\n\r\n  const completed = tasks.filter(t => !t.pending).length;\r\n  const pending = tasks.filter(t => t.pending).length;\r\n\r\n  const chartData = [\r\n    { name: \"Completed\", value: completed },\r\n    { name: \"Pending\", value: pending },\r\n  ];\r\n  const COLORS = [\"#22c55e\", \"#f59e0b\"]; // green / amber\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold text-purple-700\">Dashboard</h1>\r\n      {msg && <p className=\"text-red-600\">{msg}</p>}\r\n\r\n      <div className=\"card p-6 flex flex-col md:flex-row items-center gap-8\">\r\n        <div>\r\n          <PieChart width={320} height={320}>\r\n            <Pie\r\n              data={chartData}\r\n              dataKey=\"value\"\r\n              nameKey=\"name\"\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              outerRadius={120}\r\n              label\r\n              isAnimationActive={true}\r\n              animationBegin={0}\r\n              animationDuration={900}\r\n            >\r\n              {chartData.map((entry, idx) => (\r\n                <Cell key={`cell-${idx}`} fill={COLORS[idx % COLORS.length]} />\r\n              ))}\r\n            </Pie>\r\n            <Tooltip />\r\n            <Legend />\r\n          </PieChart>\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <p className=\"text-lg\">Total Tasks: <b>{tasks.length}</b></p>\r\n          <p>Completed: <b className=\"text-green-600\">{completed}</b></p>\r\n          <p>Pending: <b className=\"text-amber-600\">{pending}</b></p>\r\n          <a href=\"/tasks\" className=\"btn btn-primary mt-2\">Go to Your Tasks</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAE/B,MAAM,QAAQ,sCAAgC,0BAAgC;IAE9E,MAAM,aAAa;QACjB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,UAAU,CAAC,EAAE;gBAC9C,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;YAC9C;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO,OAAO,KAAK,KAAK,IAAI;YACzC,SAAS;QACX,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,wCAAY,OAAQ,OAAO,QAAQ,CAAC,IAAI,GAAG;;;IAE7C,GAAG,EAAE;IAEL,MAAM,YAAY,MAAM,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,OAAO,EAAE,MAAM;IACtD,MAAM,UAAU,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,EAAE,MAAM;IAEnD,MAAM,YAAY;QAChB;YAAE,MAAM;YAAa,OAAO;QAAU;QACtC;YAAE,MAAM;YAAW,OAAO;QAAQ;KACnC;IACD,MAAM,SAAS;QAAC;QAAW;KAAU,EAAE,gBAAgB;IAEvD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqC;;;;;;YAClD,qBAAO,8OAAC;gBAAE,WAAU;0BAAgB;;;;;;0BAErC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;kCACC,cAAA,8OAAC,gKAAQ;4BAAC,OAAO;4BAAK,QAAQ;;8CAC5B,8OAAC,sJAAG;oCACF,MAAM;oCACN,SAAQ;oCACR,SAAQ;oCACR,IAAG;oCACH,IAAG;oCACH,aAAa;oCACb,KAAK;oCACL,mBAAmB;oCACnB,gBAAgB;oCAChB,mBAAmB;8CAElB,UAAU,GAAG,CAAC,CAAC,OAAO,oBACrB,8OAAC,4JAAI;4CAAqB,MAAM,MAAM,CAAC,MAAM,OAAO,MAAM,CAAC;2CAAhD,CAAC,KAAK,EAAE,KAAK;;;;;;;;;;8CAG5B,8OAAC,kKAAO;;;;;8CACR,8OAAC,gKAAM;;;;;;;;;;;;;;;;kCAGX,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;;oCAAU;kDAAa,8OAAC;kDAAG,MAAM,MAAM;;;;;;;;;;;;0CACpD,8OAAC;;oCAAE;kDAAW,8OAAC;wCAAE,WAAU;kDAAkB;;;;;;;;;;;;0CAC7C,8OAAC;;oCAAE;kDAAS,8OAAC;wCAAE,WAAU;kDAAkB;;;;;;;;;;;;0CAC3C,8OAAC;gCAAE,MAAK;gCAAS,WAAU;0CAAuB;;;;;;;;;;;;;;;;;;;;;;;;AAK5D","debugId":null}}]
}